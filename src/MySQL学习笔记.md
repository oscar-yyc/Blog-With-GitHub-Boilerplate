---
layout: post
title: MySQL学习笔记
slug: mysql_notes
date: 2020/4/09 19:30:00
status: publish
author: dachunwang
categories: 
  - 编程开发
  - 数据库

tags: 
  - MySQL
---
## 数据库基础知识



### 数据库概述



数据库：（Database，DB）是按照数据结构来组织、存储和管理数据的仓库，其本身可看作电子化的文件柜，用户可以对文件中的数据进行增加、删除、修改、查找等操作。



数据库系统：由数据库、数据库管理系统、数据库应用程序等组成。



### 数据库存储结构 



数据库是存储和管理数据的仓库，但数据库并不能直接存储数据，数据是存储在表中的，在存储数据的过程中一定会用到数据库服务器，所谓的数据库服务器就是指在计算机上安装一个数据库管理程序。



### SQL语言



SQL（Structured Query Language即结构化查询语言）语言是一种数据库查询语言和程序设计语言。

它是一种关系型数据库语言，主要用于管理数据库中的数据，如存取数据、查询数据、更新数据等。

关系型数据库语言由4部分组成，具体如下：



（1）数据定义语言（DDL） 用于数据库的创建以及修改



（2）数据操作语言（DML） 用于执行插入、删除操作



（3）数据查询语言（DQL） 用于执行查询操作



（4）数据控制语言（DCL） 用于执行权限操作



### 常见的数据库产品

![1jlO61.jpg](https://s2.ax1x.com/2020/02/14/1jlO61.jpg)

 - ORACLE数据库



Oracle数据库管理系统是由甲骨文（Oracle）公司开发的，在数据库领域一直处于领先地位。目前，Oracle 数据库覆盖了大、中、小型机等几十种机型，成为世界上使用最广泛的关系型数据管理系统（由二维表及其之间的关系组成的一个数据库）之一。

Oracle数据库管理系统采用标准的SQL 语言，并经过美国国家标准技术所(NIST)测试。与IBM SQL/DS、DB2、INGRES、IDMS/R等兼容，而且它可以在VWS、DOS、UNIX、Windows等操作系统下工作。不仅如此，Oracle 数据库管理系统还具有良好的兼容性、可移植性和可连接性。
![](https://s2.ax1x.com/2020/02/14/1j1039.jpg)

 - SQL server数据库



SQL Server是由微软公司开发的一种关系型数据库管理系统，它已广泛用于电子商务、银行、保险、电力等行业。

SQL Server 提供了对XML和Internet标准的支持，具有强大的、灵活的、基于Web的应用程序管理功能。而且界面友好、易于操作，深受广大用户的喜爱，但它只能在Windows平台上运行，并对操作系统的稳定性要求较高，因此很难处理日益增长的用户数量。
![](https://s2.ax1x.com/2020/02/14/1j3V29.png)

 - DB2



DB2数据库是由IBM公司研制的一种关系型数据库管理系统，主要应用于OS/2、Windows等平台下，具有较好的可伸缩性，可支持从大型机到单用户环境。

DB2支持标准的SQL语言，并且提供了高层次的数据利用性、完整性、安全性和可恢复性，以及小规模到大规模应用程序的执行能力，适合于海量数据的存储，但相对于其它的数据库管理系统而言，DB2的操作比较复杂。
![](https://s2.ax1x.com/2020/02/14/1j3cMn.jpg)

 - MongoDB



MongoDB是由10gen公司开发的一个介于关系数据库和非关系数据库之间的产品，是非关系数据库当中功能最丰富，最像关系数据库的。他支持的数据结构非常松散，是类似JSON的bjson格式，因此可以存储比较复杂的数据类型。

Mongo数据库管理系统最大的特点是它支持的查询语言非常强大，其语法有点类似于面向对象的查询语言，可以实现类似关系数据库单表查询的绝大部分功能，而且还支持对数据建立索引。不仅如此，它还是一个开源数据库，并且具有高性能、易部署、易使用，存储数据非常方便等特点。对于大数据量、高并发、弱事务的互联网应用，MongoDB完全可以满足Web2.0和移动互联网的数据存储需求。
![](https://s2.ax1x.com/2020/02/14/1jGBcj.jpg)

 - MySQL



MySQL 数据库管理系统是由瑞典的MySQL AB公司开发的，但是几经辗转，现在是Oracle产品。它是以“客户端/服务器”模式实现的，是一个多用户、多线程的小型数据库服务器。而且MySQL是开源数据的，任何人都可以获得该数据库的源代码并修正MySQL的缺陷。

MySQL具有跨平台的特性，它不仅可以在Windows平台上使用，还可以在UNIX、Linux、和Mac OS等平台上使用。相对其他数据库而言，MySQL的使用更加方便、快捷而且MySQL是免费的运营成本低，因此，越来越多的公司都在使用MySQL。



## 启动MySQL服务



### 1.通过Windows服务管理器启动MySQL服务



打开【运行】命令



![](https://s2.ax1x.com/2020/02/14/1jCgD1.png)



输入命名“services.msc”



![](https://s2.ax1x.com/2020/02/14/1jCsgJ.png)



找到MySQL服务右击启动



[![](https://s2.ax1x.com/2020/02/14/1jCyv9.png)](https://imgchr.com/i/1jCyv9)



### 2.使用DOS命令启动



以管理员身份运行cmd



![](https://s2.ax1x.com/2020/02/14/1jFMAx.png)



输入以下命令启动MySQL服务



```
net start mysql
```


![](https://s2.ax1x.com/2020/02/14/1jFl4K.png)



输入以下命令停止MySQL服务



```
net stop mysql
```


![](https://s2.ax1x.com/2020/02/14/1jFQN6.png)



## 使用DOS命令登陆MySQL服务数据库



以管理员身份运行cmd



![](https://s2.ax1x.com/2020/02/14/1jFMAx.png)



在登陆数据库之前，要先启动MySQL服务



输入以下命令登陆MySQL数据库



```
mysql -h hostname -u username -p
```


hostname为服务器主机地址

username为用户名



![](https://s2.ax1x.com/2020/02/14/1jQMVS.png)



再输入密码即可登陆



![](https://s2.ax1x.com/2020/02/14/1jQub8.png)



## 数据库的基本操作



### 创建数据库



```
CREATE DATABASE  数据库名称;
```


### 查看所有已存在数据库



```
SHOW DATABASES;
```


### 查看已创建好的数据库信息



```
SHOW CREATE DATABASE 数据库名;
```


### 修改数据库编码



```
ALTER DATABASE 数据库名 default CHARACTER SET 编码方式 COLLATE 编码方式_bin;
```



> 两个编码方式均为修改后的编码方式



### 使用数据库



```
USE 数据库名;
```


### 查看当前使用的数据库



```
SELECT DATABASE();
```



### 删除数据库



```
DROP DATABASE 数据库名;
```


## 数据类型



### 整数类型



MySQL中的整数类型可分为5种，分别是TINYINT、SMALLINT、MEDIUMINT、INT和BIGINT



![](http://image-xiaowangwang.test.upcdn.net/%E7%BD%91%E7%AB%99%E7%94%A8%E5%9B%BE/MySQL%E6%95%B4%E6%95%B0%E7%B1%BB%E5%9E%8B.png)



###  浮点数类型和定点数类型



在MySQL数据库中，存储的小数都是使用浮点数和定点数来表示的。



浮点数的类型有两种，分别是单精度浮点数类型（FLOAT）和双精度浮点类型（DOUBLE）。而定点数类型只有DECIMAL类型。



![](http://image-xiaowangwang.test.upcdn.net/%E7%BD%91%E7%AB%99%E7%94%A8%E5%9B%BE/MySQL%E6%B5%AE%E7%82%B9%E6%95%B0%E5%92%8C%E5%AE%9A%E7%82%B9%E6%95%B0%E7%B1%BB%E5%9E%8B.png)

**DECIMAL(M, D)**



- **M**表示该小数最多需要的十进制有效数字个数

注意是**有效数字**个数，比方说对于小数**-2.3**来说有效数字个数就是2，对于小数**0.9**来说有效数字个数就是**1**。



- **D**表示该小数的小数点后的十进制数字个数。

小数点后有几个十进制数字，**D**的值就是什么。



|     类 型     |     取值范围     |
| :-----------: | :--------------: |
| DECIMAL(3, 0) |     -99 ~ 99     |
| DECIMAL(3, 1) |   -99.9 ~ 99.9   |
| DECIMAL(3, 2) |    -9.9 ~ 9.9    |
| DECIMAL(4, 1) |  -999.9 ~ 999.9  |
| DECIMAL(5, 1) | -9999.9 ~ 9999.9 |

[定点数类型详解](https://blog.51cto.com/14226230/2420577)



###  日期与时间类型



为了方便在数据库中存储日期和时间，MySQL提供了表示日期和时间的数据类型，分别是YEAR、DATE、TIME、DATETIME和TIMESTAMP



![](http://image-xiaowangwang.test.upcdn.net/%E7%BD%91%E7%AB%99%E7%94%A8%E5%9B%BE/MySQL%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4%E7%B1%BB%E5%9E%8B.png)

- **YEAR**类型

​        **YEAR**类型用于表示年份，在MySQL中，可以使用以下三种格式指定YEAR类型的值：

1. 使用4位字符串或数字表示，范围为‘1901’ ~ ‘2155’或1901 ~ 2155
2. 使用2位字符串表示，范围为‘00’~‘99’
3. 使用2位数字表示，范围为1~99

- **DATE**类型

​        **DATE**类型用于表示日期值，不包含时间部分，在MySQL中，可以使用以下四种格式指定DATE类型的值：

1. 以‘YYYY-MM-DD’或者‘YYYYMMDD’字符串格式表示。
2. 以‘YY-MM-DD’或者‘YYMMDD’字符串格式表示。
3. 以YY-MM-DD或者YYMMDD数字格式表示。
4. 使用CURRENT_DATE或者NOW()表示当前系统日期。

- **TIME**类型

  **TIME**类型用于表示时间值，它的显示形式一般为HH:MM:SS，其中，HH表示小时，MM表示分，SS表示秒。

  在MySQL中，可以使用以下三种格式指定TIME类型的值：

1.以‘D HH:MM:SS’字符串格式表示。

2.以‘HHMMSS’字符串格式或者HHMMSS数字格式表示。

3.使用CURRENT_TIME或NOW()输入当前系统时间。

- **DATETIME**类型

​         **DATETIME**类型用于表示日期和时间，它的显示形式为‘YYYY-MM-DD HH:MM:SS’，其中，YYYY表示年，MM表示月，DD表示日，HH表示小时，MM表示分，SS表示秒。

在MySQL中，可以使用以下四种格式指定DATETIME类型的值：

1. 以‘YYYY-MM-DD HH:MM:SS’或者‘YYYYMMDDHHMMSS’字符串格式表示的日期和时间，取值范围为‘1000-01-01 00:00:00’~‘9999-12-3 23:59:59’。
2. 以‘YY-MM-DD HH:MM:SS’或者‘YYMMDDHHMMSS’字符串格式表示的日期和时间，其中YY表示年，取值范围为‘00’~‘99’。
3. 以YYYYMMDDHHMMSS或者YYMMDDHHMMSS数字格式表示的日期和时间。
4. 使用NOW来输入当前系统的日期和时间。

- **TIMESTAMP**类型

  **TIMESTAMP**类型用于表示日期和时间，它的显示形式同DATETIME相同，但取值范围比DATETIME小。

  

### MySQL 获得当前日期时间函数



1.获得当前日期+时间（YYYY-MM-DD HH:MM:SS)

- now()
- current_timestamp()
- current_timestamp
- localtime()
- localtime
- localtimestamp 
- localtimestamp()
- sysdate()

2.获得当前时间（HH:MM:SS)

- curtime()
- current_time()
- current_time

3.获得当前日期（YYYY-MM-DD)

- curdate()
- current_date()
- current_date



### 字符串和二进制类型



为了存储字符串、图片和声音等数据，MySQL提供了字符串和二进制类型

![](http://image-xiaowangwang.test.upcdn.net/%E7%BD%91%E7%AB%99%E7%94%A8%E5%9B%BE/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E4%BA%8C%E8%BF%9B%E5%88%B6.png)

- **CHAR**和**VARCHAR**类型

**CHAR**和**VARCHAR**类型都用来表示字符串数据，不同的是，**VARCHAR**可以存储可变长度的字符串。

在MySQL中，定义**CHAR**和**VARCHAR**类型的方式如下所示：

> **CHAR(M)** 或 **VARCHAR(M)**

在上述定义方式中，M指的是字符串的最大长度。

![](http://image-xiaowangwang.test.upcdn.net/%E7%BD%91%E7%AB%99%E7%94%A8%E5%9B%BE/char%E5%92%8Cvarchar.png)

从上表中可以看出，当数据为**CHAR(4)**类型时，不管插入值的长度是多少，所占用的存储空间都是4个字节，而**VARCHAR(4)**所对应的数据所占用的字节数为实际长度加1。

- **BINARY**和**VARBINARY**类型

**BINARY**和**VARBINARY**类型类似于**CHAR**和**VARCHAR**，不同的是，它们所表示的是二进制数据。

定义**BINARY**和**VARBINARY**类型的方式如下所示：

> **BINARY(M)** 或 **VARBINARY(M)**

需要注意的是，**BINARY**类型的长度是固定的，如果数据的长度不足最大长度，将在数据的后面用“\0”补齐，最终达到指定长度。

- **TEXT**类型

TEXT类型用于表示大文本数据，例如，文章内容、评论等，它的类型分为四种：

|  数据类型  | 存储范围           |
| :--------: | ------------------ |
|  TINYTEXT  | 0 ~ 255字节        |
|    TEXT    | 0 ~ 65535字节      |
| MEDIUMTEXT | 0 ~ 16777215字节   |
|  LONGTEXT  | 0 ~ 4294967295字节 |

- **BLOB**类型

BLOB类型是一种特殊的二进制类型，它用于表示数据量很大的二进制数据，例如图片、PDF文档等。

BLOB类型分为四种：

|  数据类型  | 存储范围           |
| :--------: | ------------------ |
|  TINYBLOB  | 0 ~ 255字节        |
|    BLOB    | 0 ~ 65535字节      |
| MEDIUMBLOB | 0 ~ 16777215字节   |
|  LONGBLOB  | 0 ~ 4294967295字节 |

需要注意的是，BLOB类型与TEXT类型很相似，但BLOB类型数据是根据二进制编码进行比较和排序，而TEXT类型数据是根据文本模式进行比较和排序。

- **ENUM**类型

**ENUM**类型又称为枚举类型。

定义**ENUM**类型的数据格式如下所示：

> ENUM('值1', '值2', '值3'……'值n')

在上述格式中，('值1', '值2', '值3'……'值n')称为枚举列表，**ENUM**类型的数据只能从枚举列表中取，并且只能取一个。

需要注意的是，枚举列举中的每个值都有一个顺序编号，MySQL中存入的就是这个顺序编号，而不是列表中的值。

- **SET**类型

SET类型用于表示字符串对象，它的值可以有零个或多个，SET类型数据的定义格式与ENUM类型类似，具体语法格式如下所示： 

> SET('值1', '值2', '值3'……'值n')

与ENUM类型相同，('值1', '值2', '值3'……'值n')列表中的每个值都有一个顺序编号，MySQL中存入的也是这个顺序编号，而不是列表中的值。

- **BIT**类型

BIT类型用于表示二进制数据。定义BIT类型的基本语法格式如下所示：

> BIT(M)

在上述格式中，M用于表示每个值的位数，范围为1~64。

需要注意的是，如果分配的BIT(M)类型的数据长度小于M，将在数据的左边用0补齐。



## 数据表的基本操作



在以下语法格式中出现的[ ]内的内容均表示可选



### 创建数据表



创建数据表之前需要使用`USE 数据库名；`选择操作在哪个数据库进行。

语法格式：

```
CREATE TABLE 表名

(

 字段名1,数据类型[完整性约束条件],

字段名2,数据类型[完整性约束条件],

．．．．．．

字段名n,数据类型[完整性约束条件],

);   
```



### 查看数据表



- 使用**SHOW CREATE TABLE**查看数据表

在MySQL中，**SHOW CREATE TABLE**语句不仅可以查看创建表时的定义语句，还可以查看表的字符编码。SHOW **CREATE TABLE**语句的基本语法格式如下所示：

```
SHOW CREATE TABLE 表名;
```

- 使用**DESCRIBE**语句查看数据表

在MySQL中，使用**DESCRIBE**语句可以查看表的字段信息，其中包括字段名、字段类型等信息。**DESCRIBE**语句的基本语法格式如下所示：

```
DESCRIBE 表名;
```

或简写为：

```
DESC 表名;
```



### 修改数据表



- 修改数据表名

在数据库中，不同的数据表是通过表名来区分的。在MySQL中，修改表名的基本语法格式如下所示：

```
ALTER TABLE 旧表名 RENAME [TO] 新表名;
```

在上述格式中，“旧表名”指的是修改前的表名，“新表名”指的是修改后的表名，关键字TO是可选的，其在SQL语句中是否出现不会影响语句的执行。

- 修改字段名

数据表中的字段是通过字段名来区分的。在MySQL中，修改字段名的基本语法格式如下所示：

```
ALTER TABLE 表名 CHANGE 旧字段名 新字段名 新数据类型;
```

在上述格式中，“旧字段名”指的是修改前的字段名，“新字段名”指的是修改后的字段名，“新数据类型”指的是修改后的数据类型。

需要注意的是，新数据类型不能为空，即使新字段与旧字段的数据类型相同，也必须将新数据类型设置为与原来一样的数据类型。

- 修改字段的数据类型

修改字段的数据类型，就是将字段的数据类型转为另外一种数据类型。在MySQL中修改字段数据类型的基本语法格式如下所示：

```
ALTER TABLE 表名 MODIFY 字段名 数据类型;
```

在上述格式中，“表名”指的是要修改字段所在的表名，“字段名”指的是要修改的字段，“数据类型”指的是修改后的字段的数据类型。

- 添加字段

在MySQL中，添加字段的基本语法格式如下所示：

```
ALTER TABLE 表名 ADD 新字段名 数据类型 [约束条件][FIRST|AFTER 已存在字段名]
```

在上述格式中，“新字段名”为添加字段的名称，“FIRST”为可选参数，用于将新添加的字段设置为表的第一个字段，“AFTER”也为可选参数，用于将新添加的字段添加到指定的“已存在字段名”的后面。

- 删除字段

所谓删除字段指的是将某个字段从表中删除。在MySQL中，删除字段的基本语法格式如下所示：

```
ALTER TABLE 表名 DROP 字段名;
```

在上述格式中，“字段名”指的是要删除的字段的名称。

- 修改字段排列位置

在MySQL中，修改字段排列位置的基本语法格式如下：

```
ALTER TABLE表名 MODIFY 字段名1 数据类型 FIRST|AFTER 字段名2
```

在上述格式中，“字段名1”指的是修改位置的字段，“数据类型”指的是字段1的数据类型，“FIRST”为可选参数，指的是将字段1修改为表的第一个字段，“AFTER 字段名2”是将字段1插入到字段2的后面。



### 删除数据表



删除数据表是指删除数据库中已存在的表，在删除数据表的同时，数据表中存储的数据都将被删除。

在MySQL中，直接使用**DROP TABLE**语句就可以删除没有被其它表关联的数据表，其基本的语法格式如下所示： 

```
DROP TABLE 表名;
```



## 表的约束



常见的几种表的约束

|  约束条件   | 说明                             |
| :---------: | -------------------------------- |
| PRIMARY KEY | 主键约束，用于唯一标识对应的记录 |
| FOREIGN KEY | 外键约束                         |
|  NOT NULL   | 非空约束                         |
|   UNIQUE    | 唯一性约束                       |
|   DEFAULT   | 默认值约束，用于设置字段的默认值 |



### 主键约束



在MySQL中，为了快速查找表中的某条信息，可以通过设置主键来实现。

主键约束是通过**PRIMARY KEY**定义的，它可以唯一标识表中的记录，这就好比身份证可以用来标识人的身份一样

1.单字段主键

语法格式：

```
字段名 数据类型 PRIMARY KEY
```

2.多字段主键

语法格式：

```
PRIMARY KEY (字段名1,字段名2,……字段名n)
```



### 非空约束



非空约束指的是字段的值不能为NULL，在MySQL中，非空约束是通过NOT NULL定义的，

其基本的语法格式如下所示：

```
字段名 数据类型 NOT NULL
```



### 唯一约束



唯一约束用于保证数据表中字段的唯一性，即表中字段的值不能重复出现。唯一约束是通过UNIQUE定义的，其基本的语法格式如下所示：

```
字段名 数据类型 UNIQUE
```



### 默认约束



默认约束用于给数据表中的字段指定默认值，即当在表中插入一条新记录时，如果没有给这个字段赋值，那么，数据库系统会自动为这个字段插入默认值。默认值是通过DEFAULT关键字定义的。

默认约束基本的语法格式如下所示：

```
字段名 数据类型 DEFAULT 默认值
```



### 设置表的字段值自动增加



在数据表中，若想为表中插入的新记录自动生成唯一的ID，可以使用AUTO_INCREMENT约束来实现。

AUTO_INCREMENT约束的字段可以是任何整数类型。

默认情况下，该字段的值是从1开始自增的。

使用AUTO_INCREMENT设置表字段值自动增加的基本语法格式如下所示：

```
字段名 数据类型 AUTO_INCREMENT
```



## 索引



数据库的索引好比新华字典的音序表，它是对数据库表中一列或多列的值进行排序后的一种结构，其作用就是提高表中数据的查询速度。

MySQL中的索引分为很多种，具体如下：

1、普通索引

2、唯一性索引

3、全文索引

4、单列索引

5、多列索引

6、空间索引



### 创建索引语法格式



**一、创建表时创建**



```
CREATE TABLE 表名(
 			     字段名1,数据类型[完整性约束条件],
 				 字段名2,数据类型[完整性约束条件],
     			 ．．．．．．
    			 字段名n,数据类型[完整性约束条件],
 				 ［UNIQUE|FULLTEXT|SPATIAL］ INDEX|KEY [别名] (字段名1 [(长度)] [ASC|DESC])
				  ); 
```

> UNIQUE：可选参数，表示唯一性约束
>
> FULLTEXT：可选参数，表示全文约束
>
> SPATIAL：可选参数，表示空间约束
>
> INDEX和KEY：用来表示字段的索引，二者选一即可
>
> 别名：可选参数，表示创建的索引的名称
>
> 字段名1：指定索引对应字段的名称
>
> 长度：可选参数，用于表示索引的长度
>
> ASC和DESC：可选参数，其中，ASC表示升序排列，DESC表示降序排列



**二、使用CREATE INDEX 语句在已经存在的表上创建索引**



若想在一个已经存在的表上创建索引，可以使用CREATE INDEX语句，

CREATE INDEX语句创建索引的具体语法格式如下所示：

```
CREATE [UNIQUE|FULLTEXT|SPATIAL] INDEX 索引名 ON 表名 (字段名 [(长度)] [ASC|DESC]);
```



**三、使用ALTER TABLE语句在已经存在表上创建索引**

```
ALTER TABLE 表名 ADD [UNIQUE|FULLTEXT|SPATIAL]  INDEX 索引名 (字段名 [(长度)] [ASC|DESC]);
```



### 创建普通索引



**一、创建表时创建**

语法格式：

```
CREATE TABLE 表名(
 			     字段名1,数据类型[完整性约束条件],
 				 字段名2,数据类型[完整性约束条件],
     			 ．．．．．．
    			 字段名n,数据类型[完整性约束条件],
 				 INDEX [别名] [别名] (字段名1 [(长度)] [ASC|DESC])
				  ); 
```



**二、使用CREATE INDEX 语句在已经存在的表上创建索引**

```
CREATE INDEX 索引名 ON 表名 (字段名 [(长度)] [ASC|DESC]);
```



**三、使用ALTER TABLE语句在已经存在表上创建索引**

```
ALTER TABLE 表名 ADD INDEX 索引名 (字段名 [(长度)] [ASC|DESC]);
```



### 创建唯一性索引



一、创建表时创建

```
CREATE TABLE 表名(
 			     字段名1,数据类型[完整性约束条件],
 				 字段名2,数据类型[完整性约束条件],
     			 ．．．．．．
    			 字段名n,数据类型[完整性约束条件],
 				 UNIQUE INDEX [别名] (字段名1 [(长度)] [ASC|DESC])
				  ); 
```



**二、使用CREATE INDEX 语句在已经存在的表上创建索引**

```
CREATE UNIQUE INDEX 索引名 ON 表名 (字段名 [(长度)] [ASC|DESC]);
```



**三、使用ALTER TABLE语句在已经存在表上创建索引**

```
ALTER TABLE 表名 ADD UNIQUE INDEX 索引名 (字段名 [(长度)] [ASC|DESC]);
```



### 创建全文索引



一、创建表时创建

```
CREATE TABLE 表名(
 			     字段名1,数据类型[完整性约束条件],
 				 字段名2,数据类型[完整性约束条件],
     			 ．．．．．．
    			 字段名n,数据类型[完整性约束条件],
 				 FULLTEXT INDEX [别名] (字段名1 [(长度)] [ASC|DESC])
				  ); 
```



**二、使用CREATE INDEX 语句在已经存在的表上创建索引**

```
CREATE FULLTEXT INDEX 索引名 ON 表名 (字段名 [(长度)] [ASC|DESC]);
```



**三、使用ALTER TABLE语句在已经存在表上创建索引**

```
ALTER TABLE 表名 ADD FULLTEXT INDEX 索引名 (字段名 [(长度)] [ASC|DESC]);
```



### 创建单列索引



一、创建表示创建

```
CREATE TABLE 表名(
 			     字段名1,数据类型[完整性约束条件],
 				 字段名2,数据类型[完整性约束条件],
     			 ．．．．．．
    			 字段名n,数据类型[完整性约束条件],
 				 INDEX [别名] (字段名1 [(长度)] [ASC|DESC])
				  ); 
```



**二、使用CREATE INDEX 语句在已经存在的表上创建索引**

```
CREATE INDEX 索引名 ON 表名 (字段名 [(长度)] [ASC|DESC]);
```



**三、使用ALTER TABLE语句在已经存在表上创建索引**

```
ALTER TABLE 表名 ADD  INDEX 索引名 (字段名 [(长度)] [ASC|DESC]);
```



### 创建多列索引



一、创建表时创建

```
CREATE TABLE 表名(
 			     字段名1,数据类型[完整性约束条件],
 				 字段名2,数据类型[完整性约束条件],
     			 ．．．．．．
    			 字段名n,数据类型[完整性约束条件],
 				 INDEX [别名] (字段名1 [(长度)],字段名2 [(长度)])
				  ); 
```



**二、使用CREATE INDEX 语句在已经存在的表上创建索引**

```
CREATE INDEX 索引名 ON 表名 (字段名1 [(长度)],字段名2 [(长度)] );
```



**三、使用ALTER TABLE语句在已经存在表上创建索引**

```
ALTER TABLE 表名 ADD  INDEX 索引名 (字段名1 [(长度)],字段名2 [(长度)] );
```



### 创建空间索引



创建一个表名为t6的表，在空间类型为GEOMETRY的字段上创建空间索引，SQL语句如下：

```
CREATE TABLE t6(
				id INT,
				space GEOMETRY NOT NULL,
				SPATIAL INDEX sp(space)
				)ENGINE=MyISAM;
```

> 需要注意的是，创建空间索引时，所在字段的值不能为空值，并且表的存储引擎为MyISAM。



**二、使用CREATE INDEX 语句在已经存在的表上创建索引**

```
CREATE SPATIAL INDEX 索引名 ON 表名 (字段名);
```



**三、使用ALTER TABLE语句在已经存在表上创建索引**

```
ALTER TABLE 表名 ADD SPATIAL INDEX 索引名 (字段名;
```



### 删除索引



**1、使用ALTER TABLE删除索引**

```
ALTER TABLE 表名 DROP INDEX 索引;
```



**2、使用DROP INDEX删除索引**

```
DROP INDEX 索引名 ON 表名;
```



## 添加数据



### 为表中所有字段添加数据



**一、INSERT语句中指定所有字段名**

```
INSERT INTO 表名(字段名1，字段名2，……) 
VALUES(值1，值2，……);
```

> “字段名1，字段名2，……”表示数据表中的字段名称，此处必须列出表所有字段的名称；
>
> “值1，值2，……”表示每个字段的值，每个值的顺序、类型必须与对应的字段相匹配。



**二、INSERT语句中不指定字段名**

```
INSERT INTO 表名 VALUES(值1，值2，……);
```

> “值1，值2，……”用于指定要添加的数据。
>
> 需要注意的是，由于INSERT语句中没有指定字段名，添加的值的顺序必须和字段在表中定义的顺序相同。



### 为表中指定字段添加数据



```
INSERT INTO 表名(字段1,字段2，…)
            VALUES(值1,值2,…);
```

> “字段1，字段2，…”表示数据表中的字段名称，此次只指定表中部分字段的名称。
>
> “值1，值2，……”表示指定字段的值，每个值的顺序、类型必须与对应的字段相匹配



### 同时添加多条记录



```
INSERT INTO 表名[(字段1,字段2，…)]
            VALUES(值1,值2,…),
                  (值1,值2,…),
                    ... ...
                  (值1,值2,…),;
```



## 更新数据



```
UPDATE 表名
	SET 字段名1 = 值1[，字段名2 = 值2，……]
	[WHERE 条件表达式];
```

> “字段名1”，“字段名2”用于指定要更新的字段名称，
>
> “值1”，“值2”用于表示字段更新的新数据。
>
> “WHERE条件表达式”是可选的，用于指定更新数据需要满足的条件。



## 删除数据



```
DELETE FROM 表名 [WHERE 条件表达式];
```

> “表名”指定要执行删除操作的表，WHERE子句为可选参数，
>
> 用于指定删除的条件，满足条件的记录会被删除。



## 简单查询



### SELECT 语句



```
SELECT  [DISTINCT] *|{字段名1, 字段名2, 字段名3,……}
             FROM 表名
	         [WHERE 条件表达式1]
	         [GROUP BY 字段名 [HAVING 条件表达式2]]
	         [ORDER BY 字段名 [ASC|DESC]]
	         [LIMIT [OFFSET] 记录数]
```

> “字段1，字段2...”表示从表中查询的指定字段
>
> 星号（“*”）通配符表示表中所有字段，两者为互斥关系，任选其一
>
> “DISTINCT”是可选参数，用于剔除查询结果中重复的数据
>
> FROM 表名    表示从指定的表中查询数据
>
> “WHERE”是可选参数，用于指定查询条件
>
> “GROUP BY”是可选参数，用于将查询结果按照指定字段进行分组，“HAVING”也是可选参数，用于对分组后的结果进行过滤。
>
> “ORDER BY”是可选参数，用于将查询结果按照指定字段进行排序。排序方式由参数ASC或DESC控制，其中ASC表示按升序进行排列，DESC表示按降序进行排列。如果不指定参数，默认为升序排列。
>
> “LIMIT”是可选参数，用于限制查询结果的数量。LIMIT后面可以跟2个参数第一个参数“OFFSET”表示偏移量，如果偏移量为0则从查询结果的第一条记录开始...以此类推。如果不指定OFFSET，其默认值为0。第二个参数“记录数”表示返回查询记录的条数。



### 查询所有字段



**一、指定所有字段**

```
SELECT 字段名1,字段名2,…… FROM  表名;
```



**二、使用星号(“*”)通配符代替所有字段**

```
SELECT  * FROM  表名;
```



### 查询指定字段



```
SELECT 字段名1,字段名2,…… FROM  表名;
```



## 条件查询



SELECT语句中最常见的是使用**WHERE**子句指定查询条件**，**带有**WHERE**子句的查询有八种



### 带关系运算符的查询



用于对数据进行过滤

```
SELECT 字段名1,字段名2,……
     FROM 表名
     WHERE 条件表达式;
```



| 关系运算符 |   说明   |
| :--------: | :------: |
|     =      |   等于   |
|     <>     |  不等于  |
|     !=     |  不等于  |
|     <      |   小于   |
|     <=     | 小于等于 |
|     >      |   大于   |
|     >=     | 大于等于 |



### 带IN关键字的查询



```
SELECT *|字段名1,字段名2,……
FROM 表名
WHERE 字段名 [NOT] IN (元素1,元素2,……);
```



### 带BETWEEN  AND关键字的查询



用于判断某个字段的值是否在指定的范围之内

```
SELECT *|{字段名1,字段名2,……}
FROM 表名
WHERE 字段名 [NOT] BETWEEN 值1 AND 值2;
```



### 空值查询



用于判断某些列是否有NULL值

```
SELECT *|字段名1,字段名2,……
FROM 表名
WHERE 字段名IS [NOT] NULL;
```



### 带DISTINCT关键字的查询



```
SELECT DISTINCT 字段名 FROM 表名;
```



### DISTINCT关键字作用于多个字段



```
SELECT DISTINCT 字段名1,字段名2,…… 
FROM 表名;
```

> 在上面的语法格式中，只有DISTINCT关键字后指定的多个字段值都相同，才会被认作是重复记录。



### 带LIKE关键字的查询



用于判断两个字符串是否相匹配

```
SELECT *|{字段名1,字段名2,……}
FROM 表名
WHERE 字段名 [NOT] LIKE '匹配字符串';
```



LIKE语法格式中的“匹配字符串”指定用来匹配的字符串，其值可以是一个普通字符串，也可以是包含百分号(%)和下划线(_)的通配字符串。

> 百分号(%)：可以匹配任意长度的字符串，包括空字符串
>
> 下划线(_)：下划线通配符只匹配单个字符，如果要匹配多个字符，需要使用多个下划线通配符。



> 百分号和下划线是通配符，它们在通配字符串中有特殊含义，因此，如果要匹配字符串中的百分号和下划线，就需要在通配字符串中使用右斜线(“\”)对百分号和下划线进行转义，例如，“\%”匹配百分号字面值，“\_”匹配下划线字面值。



### 带AND关键字的多条件查询



用于连接两个或者多个查询条件

```
SELECT *|{字段名1,字段名2,……}

FROM 表名

WHERE 条件表达式1 […… AND 条件表达式n];
```



### 带OR关键字的多条件查询



记录满足任意一个条件即被查出

```
SELECT *|{字段名1,字段名2,……}
FROM 表名
WHERE 条件表达式1 OR […… OR 条件表达式n];
```



### OR和AND关键字一起使用的情况

AND的优先级高于OR，因此当两者在一起使用时，应该先运算AND两边的条件表达式，再运算OR两边的条件表达式。